
#ifndef ACMCONFIG_H
#define ACMCONFIG_H

#define NULL_D_AXIS_CURRENT_CONTROL -1
#define MTPA -2 // not supported

#define NUMBER_OF_STEPS (250000/3)
#define DOWN_SAMPLE 1
#define CONTROL_STRATEGY NULL_D_AXIS_CURRENT_CONTROL
#define SENSORLESS_CONTROL true
#define SENSORLESS_CONTROL_HFSI false
#define VOLTAGE_CURRENT_DECOUPLING_CIRCUIT False
#define SATURATED_MAGNETIC_CIRCUIT False
#define INVERTER_NONLINEARITY false
#define TS 0.00025
#define TS_INVERSE 4000
#define TS_UPSAMPLING_FREQ_EXE 0.5
#define TS_UPSAMPLING_FREQ_EXE_INVERSE 2
#define PMSM_NUMBER_OF_POLE_PAIRS 2
#define PMSM_RESISTANCE 0.45
#define PMSM_D_AXIS_INDUCTANCE 0.00415
#define PMSM_Q_AXIS_INDUCTANCE 0.00415 // 0.01674
#define PMSM_PERMANENT_MAGNET_FLUX_LINKAGE 0.504
#define PMSM_SHAFT_INERTIA 0.06           // delta =3, 4,  10
#define SPEED_LOOP_PID_PROPORTIONAL_GAIN      1.88 // 2.64 //  2.356     // 0.5
#define SPEED_LOOP_PID_INTEGRAL_TIME_CONSTANT (1/20.9) // (1/8.8) // (1/19.635) // 1.05
#define SPEED_LOOP_PID_DIREVATIVE_TIME_CONSTANT 0
#define SPEED_LOOP_LIMIT_NEWTON_METER 8 // 8
#define SPEED_LOOP_CEILING 4
#define CURRENT_LOOP_PID_PROPORTIONAL_GAIN      0.78 //  (3.65) //0.78 // 15
#define CURRENT_LOOP_PID_INTEGRAL_TIME_CONSTANT (1/108.434) //0.08
#define CURRENT_LOOP_PID_DIREVATIVE_TIME_CONSTANT 0
#define CURRENT_LOOP_LIMIT_VOLTS 400 // 400
#define DATA_FILE_NAME "pmsm_sc.dat"
#define PC_SIMULATION True

#define MACHINE_TS         (TS*TS_UPSAMPLING_FREQ_EXE) //1.25e-4 
#define MACHINE_TS_INVERSE (TS_INVERSE*TS_UPSAMPLING_FREQ_EXE_INVERSE) // 8000

#endif


// delta = 3
// 20 ms    ->  5 ms
// 电流环带宽  转速环带宽
//   30         120
//   22.5       66

// 可以调节的量：
// SPEED_LOOP_CEILING
// LIMIT
// ACM.Tload
// ACM.rpm_cmd
// CJH_TUNING_A

// 无传感调试规律
// delta = 3, Tuning_A =25
// delta = 4, Tuning_A = 15
// delta = 10, Tuning_A = 1

